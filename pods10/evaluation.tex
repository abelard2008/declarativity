\section{Evaluation models}

Consider the \emph{successor} relation described above.  According to our intuitive interpretation, this relation models
the passage of time, in order to establish a temporal order among ground atoms.  More formally, we expect of a successor
relation $S$ that

$\forall A,B (successor(A, B) \rightarrow B > A) \land \forall A \exists B (successor(A, B))$

This implies that successor is infinite (as we'd expect time to be).  This is problematic because it leads to unsafe programs.

\newtheorem{example}{Example}
\begin{example}
Consider the program and EDB below.

\begin{Dedalus}
r1
p_pos(A, B)@next \(\leftarrow\)
  p_pos(A, B),
  \(\lnot\)p_neg(A, B);
  
p_pos(A, B)  \(\leftarrow\)
  p(A, B);
  
p(1, 2)@123;
  
\end{Dedalus}

The single ground fact will, due to \emph{r1}, cause as many deductions as there are tuples in the successor relation.

\end{example}

But if \emph{successor} is infinite, many of mthese are in some sense \emph{void deductions}, functionally determined based on the EDB.
The EDB determines a window over successor that is relevant to any computation that must be performed.  It is easy
to see that in this example, we need only consider a successor relation that contains a single tuple \{123, 124\}.

Consider the given EDB extended with two more facts:

\begin{Dedalus}
delete p(1, 2)@456;
p(?, ?)@789;
\end{Dedalus}

Evaluating this program and EDB will require a \emph{successor} relation with values that range from 123 - 789.

\begin{definition}
A \emph{post-hoc} evaluation is an evaluation of a Dedalus program in which the EDB is given, \emph{successor} is derived from it
as part of a fixpoint computation.
\end{definition}

In a post-hoc evaluation, we may use the given EDB to populate the successor relation in the following way:

Define first a second order predicate called \emph{event\_time} 
that contains the union of the time attributes from the trace of events. Let \emph{Trace} be the set of $n$ EDB predicates.  
Then \emph{event\_time} is defined as

$event\_time(\Tau) \leftarrow \displaystyle\bigcup_{i}^n \pi_{\Tau}Trace_{i}$

\begin{Dedalus}
smax(max<N>) \(\leftarrow\) event\_time(N);
smin(min<N>) \(\leftarrow\) event\_time(N);

successor(N, N + 1) \(\leftarrow\) smin(N);

successor(S, S + 1) \(\leftarrow\) 
    successor(N, S),
    smax(M),
    N <= M;
\end{Dedalus}

In a post-hoc evaluation, time is in some sense ``instantaneous" in that all values of the successor relation are considered in a single
fixpoint computation.  
\paa{notes follow}


define a trace as a list of events ordered by time.  then the property we want to prove is about prefix computations.  take a function FP that returns an IDB.  We'll use 
the notation $\Gamma$ to indicate a trace, and $\alpha_{1} \ldots \alpha_{n}$ to indicate prefixes of  $Gamma$. $\alpha_{n} = \Gamma$, and since every
$\alpha$ is an increasing subset of the EDB, we have 

$\forall \alpha_{i}, \alpha_{j} \in \Gamma ((i < j) \to (\alpha_{i} \subset \alpha_{j}))$.

We would like to show that 

$FP(\alpha_{k}) =  \displaystyle \bigcup_{i=0}^{k} FP(\alpha_{i})$ for any $k$.  

this could (with some work) lead to an inductive proof
that an infinite model is minimal.


%%   FP(alpha_{k} \union FP(alpha_{k-1} \union

if we have this, then we have:

Any posthoc evaluation is equivalent to any 
