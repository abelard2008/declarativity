\section{Discussion and Future Work}
\label{sec:discussion}

\lang simplifies the design of loosely consistent distributed systems by
enabling \emph{composability}. Rather than reasoning about the consistency of an
entire application, the programmer can instead ensure that individual lattices
satisfy \emph{local} correctness properties (e.g., commutativity, associativity,
and idempotence). The CALM analysis then verifies that when these modules are
composed to form an application, the complete program satisfies the desired
consistency properties.

Nevertheless, designing a correct lattice can still be difficult. To address
this, we plan to develop tools to give programmers more confidence in the
correctness of lattice implementations. For example, we plan to build a test
data generation framework that can efficiently cover the space of possible
inputs to lattice merge functions. We also plan to explore a restricted DSL for
writing lattice methods, which would make formal verification of correctness an
easier task.

Each lattice includes $\bot$, a distinguished ``smallest element.'' In many
programs there is also a notion of a ``largest element'': a value that, once
reached, will never be exceeded. \texttt{lbool} has a largest value
(\texttt{true}), as does the \texttt{lcart} lattice presented in
Section~\ref{sec:monotone-checkout}. We are investigating how our analysis
techniques could be improved by introducing more direct support for $\top$
values into \lang. For example, a lattice that has reached $\top$ is immutable,
and hence any function can safely be applied to it, whether monotone or not.

By allowing a more general notion of monotonicity, \lang significantly increases
the number of programs that can be shown to be confluent. However, many
distributed protocols are not intended to be confluent---rather, they exhibit
\emph{controlled non-determinism}, in which timing conditions affect the choice
of one among several acceptable outcomes. Vector clocks and causal delivery are
both examples of this kind of behavior. Although \lang is still useful---the
local correctness properties of lattices help programmers to reason about the
behavior of individual program values---we are also investigating\ldots

% Support a notion of sealing?
